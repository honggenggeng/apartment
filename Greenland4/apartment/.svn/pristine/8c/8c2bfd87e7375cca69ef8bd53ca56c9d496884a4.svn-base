webpackJsonp([8],{261:function(t,n,e){"use strict";function a(t){r||e(331)}Object.defineProperty(n,"__esModule",{value:!0});var i=e(281),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,function(){return i[t]})}(s);var d=e(333),u=e.n(d),r=!1,l=e(1),p=a,c=l(o.a,u.a,!1,p,"data-v-790136f2",null);c.options.__file="src\\views\\aden\\digiops\\planer\\audit.vue",n.default=c.exports},268:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shiftId=n.shiftUpdate=n.shiftList=n.shiftCode=n.shiftAdd=n.auditId=n.auditUpdate=n.auditList=n.auditCode=n.auditAdd=n.lineId=n.lineUpdate=n.lineList=n.lineCode=n.lineAdd=n.pointQrcode=n.pointSpinner=n.pointId=n.pointUpdate=n.pointList=n.pointCode=n.pointAdd=n.sopSpinner=n.sopId=n.sopUpdate=n.sopList=n.sopCode=n.sopAdd=n.userSpinner=n.userid=n.userupdate=n.userIsExist=n.userlist=n.userpassword=n.useradd=n.siteid=n.siteSpinner=n.siteupdate=n.siteIsExist=n.sitelist=n.siteallList=n.siteadd=n.roleupdate=n.roleadd=n.roleId=n.rolelist=n.rolemenuList=n.menu=n.upload=n.login=n.insertRole=void 0;var a=e(11),i=function(t){return t&&t.__esModule?t:{default:t}}(a);n.insertRole=function(t){return i.default.ajax.post("/digiops/role/insertRole",t)},n.login=function(t){return i.default.ajax.post("/digiops/digiops/login",t)},n.upload=function(t){return i.default.ajax.post("/digiops/upload/picture",t)},n.menu=function(){return i.default.ajax.get("/digiops/role/queryMenuList")},n.rolemenuList=function(){return i.default.ajax.get("/digiops/role/menuList")},n.rolelist=function(){return i.default.ajax.get("/digiops/role/list")},n.roleId=function(t){return i.default.ajax.get("/digiops/role/"+t)},n.roleadd=function(t){return i.default.ajax.post("/digiops/role/add",t)},n.roleupdate=function(t){return i.default.ajax.post("/digiops/role/update",t)},n.siteadd=function(t){return i.default.ajax.post("/digiops/site/add",t)},n.siteallList=function(t){return i.default.ajax.post("/digiops/site/allList",t)},n.sitelist=function(t){return i.default.ajax.post("/digiops/site/list",t)},n.siteIsExist=function(t){return i.default.ajax.post("/digiops/site/isExist",t)},n.siteupdate=function(t){return i.default.ajax.post("/digiops/site/update",t)},n.siteSpinner=function(t){return i.default.ajax.post("/digiops/site/siteSpinner",t)},n.siteid=function(t){return i.default.ajax.get("/digiops/site/"+t)},n.useradd=function(t){return i.default.ajax.post("/digiops/user/add",t)},n.userpassword=function(t){return i.default.ajax.get("/digiops/user/password",t)},n.userlist=function(t){return i.default.ajax.post("/digiops/user/list",t)},n.userIsExist=function(t){return i.default.ajax.post("/digiops/user/isExist",t)},n.userupdate=function(t){return i.default.ajax.post("/digiops/user/update",t)},n.userid=function(t){return i.default.ajax.get("/digiops/user/"+t)},n.userSpinner=function(){return i.default.ajax.get("/digiops/user/userSpinner")},n.sopAdd=function(t){return i.default.ajax.post("/digiops/sop/add",t)},n.sopCode=function(t){return i.default.ajax.get("/digiops/sop/generatedCode/"+t)},n.sopList=function(t){return i.default.ajax.post("/digiops/sop/list",t)},n.sopUpdate=function(t){return i.default.ajax.post("/digiops/sop/update",t)},n.sopId=function(t){return i.default.ajax.get("/digiops/sop/"+t)},n.sopSpinner=function(t){return i.default.ajax.get("/digiops/sop/sopSpinner/"+t)},n.pointAdd=function(t){return i.default.ajax.post("/digiops/point/add",t)},n.pointCode=function(t){return i.default.ajax.get("/digiops/point/generatedCode/"+t)},n.pointList=function(t){return i.default.ajax.post("/digiops/point/list",t)},n.pointUpdate=function(t){return i.default.ajax.post("/digiops/point/update",t)},n.pointId=function(t){return i.default.ajax.get("/digiops/point/"+t)},n.pointSpinner=function(t){return i.default.ajax.get("/digiops/point/pointSpinner/"+t)},n.pointQrcode=function(t){return i.default.ajax.post("/digiops/upload/qrcode",t)},n.lineAdd=function(t){return i.default.ajax.post("/digiops/line/add",t)},n.lineCode=function(t){return i.default.ajax.get("/digiops/line/generatedCode/"+t)},n.lineList=function(t){return i.default.ajax.post("/digiops/line/list",t)},n.lineUpdate=function(t){return i.default.ajax.post("/digiops/line/update",t)},n.lineId=function(t){return i.default.ajax.get("/digiops/line/"+t)},n.auditAdd=function(t){return i.default.ajax.post("/digiops/audit/add",t)},n.auditCode=function(t){return i.default.ajax.get("/digiops/audit/generatedCode/"+t)},n.auditList=function(t){return i.default.ajax.post("/digiops/audit/list",t)},n.auditUpdate=function(t){return i.default.ajax.post("/digiops/audit/update",t)},n.auditId=function(t){return i.default.ajax.get("/digiops/audit/"+t)},n.shiftAdd=function(t){return i.default.ajax.post("/digiops/shift/add",t)},n.shiftCode=function(t){return i.default.ajax.get("/digiops/shift/generatedCode/"+t)},n.shiftList=function(t){return i.default.ajax.post("/digiops/shift/list",t)},n.shiftUpdate=function(t){return i.default.ajax.post("/digiops/shift/update",t)},n.shiftId=function(t){return i.default.ajax.get("/digiops/shift/"+t)}},281:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(31),o=a(i),s=e(98),d=a(s),u=e(268);n.default={data:function(){var t,n=this,e=function(t,n,e){console.log(n),(n+"").match(/^([1-9][0-9]{0,1}|100)$/)?e():e(new Error("1到100整数"))};return t={searchIsEnable:2,startDate:"",endDate:"",operationstatus:"add",optionList:[],auditColumns:[{title:"序号",width:80,align:"center",type:"index"},{title:"审计名称",key:"title",render:function(t,e){return t("Input",{props:{type:"text",value:n.data[e.index].title},on:{"on-blur":function(t){n.data[e.index].title=t.target.value}}})}},{title:"操作",key:"sopDetailAction",align:"center",width:"500",render:function(t,e){return t("div",[t("Button",{props:{type:"primary",size:"default"},style:{marginRight:"5px"},on:{click:function(){n.activeindex=e.index,n.modal=!0,"string"==typeof n.data[e.index].content?n.optionList=JSON.parse(n.data[e.index].content):n.optionList=n.data[e.index].content}}},"设置"),t("Button",{props:{type:"error",size:"default"},style:{marginRight:"5px"},on:{click:function(){n.data.splice(e.index,1)}}},"删除"),t("Button",{props:{type:"primary",size:"default"},style:{marginRight:"5px"},on:{click:function(){if(e.index>0){var t=n.data[e.index];n.data.splice(e.index,1),n.data.splice(e.index-1,0,t)}}}},"上移"),t("Button",{props:{type:"primary",size:"default"},on:{click:function(){if(e.index<n.data.length){var t=n.data[e.index];n.data.splice(e.index,1),n.data.splice(e.index+1,0,t)}}}},"下移")])}}],data:[{title:2,content:[]}],modal:!1,total:0,searchValue:"",searchType:"auditNum",searchTypeList:[{title:"审计编号",key:"auditNum"},{title:"审计名称",key:"auditName"},{title:"站点名称",key:"siteName"}],selection:[],siteList:[]},(0,d.default)(t,"optionList",[]),(0,d.default)(t,"showcom",!0),(0,d.default)(t,"activeindex",0),(0,d.default)(t,"formValidate",{auditNum:"",auditName:"",siteUuid:"",auditWeight:"",isEnable:0}),(0,d.default)(t,"ruleValidate",{auditNum:[{required:!1,trigger:"change"}],auditName:[{required:!0,message:"名称为必填项",trigger:"change"}],siteUuid:[{required:!0,message:"站点为必填项",trigger:"change"}],auditWeight:[{required:!0,message:"权重为必填项",trigger:"change",type:"number"},{validator:e,trigger:"blur"}]}),(0,d.default)(t,"columns",[{type:"selection",width:60,align:"center"},{title:"审计编号",key:"auditNum"},{title:"审计名称",key:"auditName"},{title:"权重",key:"auditWeight"},{title:"站点名称",key:"siteName"},{title:"创建时间",key:"createTime",sortable:!0}]),(0,d.default)(t,"tableData",[]),t},methods:{search:function(){var t={pageSize:10,startPage:1,startDate:this.startDate,endDate:this.endDate};"isEnable"==this.searchType?t.isEnable=this.searchIsEnable:t[this.searchType]=this.searchValue,""!=this.endDate&&""!=this.startDate?this.endDate>=this.startDate?this.getformatdata(t):(this.$Message.info("结束时间应大于开始时间"),this.endDate=""):this.getformatdata(t)},handleSubmit:function(t){var n=this;this.$refs[t].validate(function(t){t?(n.$Message.success("Success!"),n.data.forEach(function(t,n){t.seq=n}),n.formValidate.auditTemplate=(0,o.default)(n.data),console.log(n.formValidate),"add"==n.operationisEnable?(0,u.auditAdd)(n.formValidate).then(function(t){n.getformatdata({pageSize:10,startPage:1})}):(0,u.auditUpdate)(n.formValidate).then(function(t){n.getformatdata({pageSize:10,startPage:1})}),n.formValidate={auditNum:"",auditName:"",siteUuid:"",auditWeight:"",isEnable:0},n.data=[],n.showcom=!0):n.$Message.error("Fail!")})},handleReset:function(t){this.showcom=!0,this.$refs[t].resetFields(),this.data=[]},addAudit:function(){this.showcom=!1,this.operationisEnable="add"},add:function(){this.data.push({title:2,content:[]})},changepage:function(t){},addOption:function(){console.log(this.optionList),this.optionList.push({value:""})},delOption:function(t){this.optionList.splice(t,1)},saveOption:function(){this.data[this.activeindex].content=this.optionList,this.optionList=[],console.log(this.data)},cancel:function(){},editAudit:function(t,n){var e=this;(0,u.auditId)(t.uuid).then(function(t){var n=t.data.data;e.formValidate={siteUuid:n.siteUuid,auditNum:n.auditNum,auditName:n.auditName,auditWeight:n.auditWeight,isEnable:n.isEnable,uuid:n.uuid},e.data=n.templates,console.log(e.data)}),this.showcom=!1,this.operationisEnable="edit"},onSelect:function(t,n){this.selection=t},removeAudit:function(){},onChange:function(t){this.getformatdata({pageSize:10,startPage:t})},siteChange:function(t){var n=this;"add"==this.operationisEnable&&(0,u.auditCode)(t).then(function(t){n.formValidate.auditNum=t.data.data})},getformatdata:function(t){var n=this;(0,u.auditList)(t).then(function(t){n.tableData=t.data.data.records,n.total=t.data.data.total,n.tableData.forEach(function(t){t.createTime=n.$util.formatTime(t.createTime),t.isEnable=0==t.isEnable?"启用":"禁用"})})}},created:function(){var t=this;this.getformatdata({pageSize:10,startPage:1}),(0,u.siteSpinner)().then(function(n){t.siteList=n.data.data})}}},331:function(t,n,e){var a=e(332);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(17)("7dde2ddc",a,!1)},332:function(t,n,e){n=t.exports=e(16)(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},333:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"operation",attrs:{id:"ccc"}},[t.showcom?e("div",{staticClass:"wrap"},[e("Row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"space-between"}},[e("Col",[e("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"ghost"},on:{click:t.addAudit}},[t._v("新建")]),t._v(" "),e("Button",{attrs:{type:"ghost"},on:{click:t.removeAudit}},[t._v("\n        删除\n      ")])],1),t._v(" "),e("Col",[e("span",[t._v("开始时间：")]),t._v(" "),e("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:t.startDate,callback:function(n){t.startDate=n},expression:"startDate"}}),t._v(" "),e("span",[t._v("结束时间：")]),t._v(" "),e("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:t.endDate,callback:function(n){t.endDate=n},expression:"endDate"}}),t._v(" "),e("Select",{staticStyle:{width:"100px"},model:{value:t.searchType,callback:function(n){t.searchType=n},expression:"searchType"}},t._l(t.searchTypeList,function(n){return e("Option",{key:n.key,attrs:{value:n.key}},[t._v(t._s(n.title))])})),t._v(" "),"isEnable"!=t.searchType?e("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索的内容"},model:{value:t.searchValue,callback:function(n){t.searchValue=n},expression:"searchValue"}}):t._e(),t._v(" "),"isEnable"==t.searchType?e("Select",{staticStyle:{width:"200px"},model:{value:t.searchIsEnable,callback:function(n){t.searchIsEnable=n},expression:"searchIsEnable"}},[e("Option",{attrs:{value:0}},[t._v("启用")]),t._v(" "),e("Option",{attrs:{value:1}},[t._v("禁用")])],1):t._e(),t._v(" "),e("Button",{attrs:{icon:"ivu-icon ivu-icon-search"},on:{click:t.search}})],1)],1),t._v(" "),e("Table",{attrs:{border:"",data:t.tableData,columns:t.columns},on:{"on-select":t.onSelect,"on-row-dblclick":t.editAudit}}),t._v(" "),e("div",{staticStyle:{float:"right",margin:"10px"}},[e("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.onChange}})],1)],1):e("Form",{ref:"formValidate",staticClass:"wrap",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-position":"right","label-width":100}},[e("Row",[e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"站点名称",prop:"siteUuid"}},[e("Select",{on:{"on-change":t.siteChange},model:{value:t.formValidate.siteUuid,callback:function(n){t.$set(t.formValidate,"siteUuid",n)},expression:"formValidate.siteUuid"}},t._l(t.siteList,function(n,a){return e("Option",{key:a,attrs:{value:n.uuid}},[t._v(t._s(n.siteName))])}))],1)],1),t._v(" "),e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"审计编号",prop:"auditNum"}},[e("Input",{attrs:{disabled:""},model:{value:t.formValidate.auditNum,callback:function(n){t.$set(t.formValidate,"auditNum",n)},expression:"formValidate.auditNum"}})],1)],1)],1),t._v(" "),e("Row",[e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"审计名称",prop:"auditName"}},[e("Input",{model:{value:t.formValidate.auditName,callback:function(n){t.$set(t.formValidate,"auditName",n)},expression:"formValidate.auditName"}})],1)],1),t._v(" "),e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"权重",prop:"auditWeight"}},[e("Input",{attrs:{placeholder:"请输入数字",number:""},model:{value:t.formValidate.auditWeight,callback:function(n){t.$set(t.formValidate,"auditWeight",n)},expression:"formValidate.auditWeight"}})],1)],1)],1),t._v(" "),e("Row",[e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",[e("div",{staticStyle:{position:"relative",left:"-100px"}},[e("Button",{attrs:{type:"ghost"},on:{click:t.add}},[t._v("添加新项")]),t._v(" "),e("Button",{staticClass:"button ",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"}},[t._v("导入列表")])],1)])],1)],1),t._v(" "),e("Table",{attrs:{columns:t.auditColumns,data:t.data,border:!0}}),t._v(" "),e("Modal",{attrs:{title:"Common Modal dialog box title"},on:{"on-ok":t.saveOption,"on-cancel":t.cancel},model:{value:t.modal,callback:function(n){t.modal=n},expression:"modal"}},[e("Button",{attrs:{type:"primary"},on:{click:t.addOption}},[t._v("添加")]),t._v(" "),t._l(t.optionList,function(n,a){return e("Row",{key:a,staticStyle:{margin:"5px 0"}},[e("Col",{attrs:{span:"20","class-name":"optionStyleBtn"}},[e("Input",{model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}})],1),t._v(" "),e("Col",{staticStyle:{"margin-left":"10px"},attrs:{span:"2"}},[e("Button",{on:{click:function(n){t.delOption(a)}}},[t._v("删除")])],1)],1)})],2),t._v(" "),e("Col",{staticStyle:{"margin-top":"20px"},attrs:{xs:24,lg:12}},[e("FormItem",[e("Button",{staticClass:"save ",staticStyle:{"margin-left":"0px"},attrs:{type:"primary"},on:{click:function(n){t.handleSubmit("formValidate")}}},[t._v("保存")]),t._v(" "),e("Button",{staticClass:"button ",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(n){t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1)],1)},i=[];a._withStripped=!0;var o={render:a,staticRenderFns:i};n.default=o}});