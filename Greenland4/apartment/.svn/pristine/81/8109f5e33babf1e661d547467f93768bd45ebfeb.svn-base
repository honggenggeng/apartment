webpackJsonp([4],{257:function(n,t,e){"use strict";function a(n){l||e(319)}Object.defineProperty(t,"__esModule",{value:!0});var i=e(277),o=e.n(i);for(var s in i)"default"!==s&&function(n){e.d(t,n,function(){return i[n]})}(s);var d=e(321),r=e.n(d),l=!1,u=e(1),p=a,c=u(o.a,r.a,!1,p,"data-v-7d1547eb",null);c.options.__file="src\\views\\aden\\digiops\\planer\\sop.vue",t.default=c.exports},268:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftId=t.shiftUpdate=t.shiftList=t.shiftCode=t.shiftAdd=t.auditId=t.auditUpdate=t.auditList=t.auditCode=t.auditAdd=t.lineId=t.lineUpdate=t.lineList=t.lineCode=t.lineAdd=t.pointQrcode=t.pointSpinner=t.pointId=t.pointUpdate=t.pointList=t.pointCode=t.pointAdd=t.sopSpinner=t.sopId=t.sopUpdate=t.sopList=t.sopCode=t.sopAdd=t.userSpinner=t.userid=t.userupdate=t.userIsExist=t.userlist=t.userpassword=t.useradd=t.siteid=t.siteSpinner=t.siteupdate=t.siteIsExist=t.sitelist=t.siteallList=t.siteadd=t.roleupdate=t.roleadd=t.roleId=t.rolelist=t.rolemenuList=t.menu=t.upload=t.login=t.insertRole=void 0;var a=e(11),i=function(n){return n&&n.__esModule?n:{default:n}}(a);t.insertRole=function(n){return i.default.ajax.post("/digiops/role/insertRole",n)},t.login=function(n){return i.default.ajax.post("/digiops/digiops/login",n)},t.upload=function(n){return i.default.ajax.post("/digiops/upload/picture",n)},t.menu=function(){return i.default.ajax.get("/digiops/role/queryMenuList")},t.rolemenuList=function(){return i.default.ajax.get("/digiops/role/menuList")},t.rolelist=function(){return i.default.ajax.get("/digiops/role/list")},t.roleId=function(n){return i.default.ajax.get("/digiops/role/"+n)},t.roleadd=function(n){return i.default.ajax.post("/digiops/role/add",n)},t.roleupdate=function(n){return i.default.ajax.post("/digiops/role/update",n)},t.siteadd=function(n){return i.default.ajax.post("/digiops/site/add",n)},t.siteallList=function(n){return i.default.ajax.post("/digiops/site/allList",n)},t.sitelist=function(n){return i.default.ajax.post("/digiops/site/list",n)},t.siteIsExist=function(n){return i.default.ajax.post("/digiops/site/isExist",n)},t.siteupdate=function(n){return i.default.ajax.post("/digiops/site/update",n)},t.siteSpinner=function(n){return i.default.ajax.post("/digiops/site/siteSpinner",n)},t.siteid=function(n){return i.default.ajax.get("/digiops/site/"+n)},t.useradd=function(n){return i.default.ajax.post("/digiops/user/add",n)},t.userpassword=function(n){return i.default.ajax.get("/digiops/user/password",n)},t.userlist=function(n){return i.default.ajax.post("/digiops/user/list",n)},t.userIsExist=function(n){return i.default.ajax.post("/digiops/user/isExist",n)},t.userupdate=function(n){return i.default.ajax.post("/digiops/user/update",n)},t.userid=function(n){return i.default.ajax.get("/digiops/user/"+n)},t.userSpinner=function(){return i.default.ajax.get("/digiops/user/userSpinner")},t.sopAdd=function(n){return i.default.ajax.post("/digiops/sop/add",n)},t.sopCode=function(n){return i.default.ajax.get("/digiops/sop/generatedCode/"+n)},t.sopList=function(n){return i.default.ajax.post("/digiops/sop/list",n)},t.sopUpdate=function(n){return i.default.ajax.post("/digiops/sop/update",n)},t.sopId=function(n){return i.default.ajax.get("/digiops/sop/"+n)},t.sopSpinner=function(n){return i.default.ajax.get("/digiops/sop/sopSpinner/"+n)},t.pointAdd=function(n){return i.default.ajax.post("/digiops/point/add",n)},t.pointCode=function(n){return i.default.ajax.get("/digiops/point/generatedCode/"+n)},t.pointList=function(n){return i.default.ajax.post("/digiops/point/list",n)},t.pointUpdate=function(n){return i.default.ajax.post("/digiops/point/update",n)},t.pointId=function(n){return i.default.ajax.get("/digiops/point/"+n)},t.pointSpinner=function(n){return i.default.ajax.get("/digiops/point/pointSpinner/"+n)},t.pointQrcode=function(n){return i.default.ajax.post("/digiops/upload/qrcode",n)},t.lineAdd=function(n){return i.default.ajax.post("/digiops/line/add",n)},t.lineCode=function(n){return i.default.ajax.get("/digiops/line/generatedCode/"+n)},t.lineList=function(n){return i.default.ajax.post("/digiops/line/list",n)},t.lineUpdate=function(n){return i.default.ajax.post("/digiops/line/update",n)},t.lineId=function(n){return i.default.ajax.get("/digiops/line/"+n)},t.auditAdd=function(n){return i.default.ajax.post("/digiops/audit/add",n)},t.auditCode=function(n){return i.default.ajax.get("/digiops/audit/generatedCode/"+n)},t.auditList=function(n){return i.default.ajax.post("/digiops/audit/list",n)},t.auditUpdate=function(n){return i.default.ajax.post("/digiops/audit/update",n)},t.auditId=function(n){return i.default.ajax.get("/digiops/audit/"+n)},t.shiftAdd=function(n){return i.default.ajax.post("/digiops/shift/add",n)},t.shiftCode=function(n){return i.default.ajax.get("/digiops/shift/generatedCode/"+n)},t.shiftList=function(n){return i.default.ajax.post("/digiops/shift/list",n)},t.shiftUpdate=function(n){return i.default.ajax.post("/digiops/shift/update",n)},t.shiftId=function(n){return i.default.ajax.get("/digiops/shift/"+n)}},277:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e(31),i=function(n){return n&&n.__esModule?n:{default:n}}(a),o=e(268);t.default={data:function(){return{searchIsEnable:2,startDate:"",endDate:"",columns:[],total:0,data:[],modal:!1,searchValue:"",searchType:"sopNum",searchTypeList:[{title:"sop编码",key:"sopNum"},{title:"sop名称",key:"sopName"},{title:"站点",key:"siteName"},{title:"状态",key:"isEnable"}],selection:[],siteList:[],operationstatus:"add",activeindex:-1,optionList:[],showcom:!0,formValidate:{isEnable:0,sopNum:"",sopName:"",siteUuid:""},ruleValidate:{sopNum:[{required:!0,message:"sop编号为必填项",trigger:"change"}],sopName:[{required:!0,message:"sop名称为必填项",trigger:"change"}],siteUuid:[{required:!0,message:"站点为必填项",trigger:"change"}]},columns1:[{type:"selection",width:60,align:"center"},{title:"sop编号",key:"sopNum"},{title:"sop名称",key:"sopName"},{title:"站点",key:"siteName"},{title:"创建时间",key:"createTime",sortable:!0},{title:"状态",key:"isEnable"}],data1:[{sopNum:"BEJTSL2220",sopName:"BEJTLS01",createTime:"BEJTLS01",isEnable:"sop2220111",siteName:"上海站"}]}},created:function(){var n=this;this.init(),(0,o.siteSpinner)().then(function(t){n.siteList=t.data.data}),this.getformatdata({pageSize:10,startPage:1})},methods:{search:function(){var n={pageSize:10,startPage:1,startDate:this.startDate,endDate:this.endDate};"isEnable"==this.searchType?n.isEnable=this.searchIsEnable:n[this.searchType]=this.searchValue,""!=this.endDate&&""!=this.startDate?this.endDate>=this.startDate?this.getformatdata(n):(this.$Message.info("结束时间应大于开始时间"),this.endDate=""):this.getformatdata(n)},add:function(){this.data.push({title:"地面",type:"button",content:[]})},addOption:function(){this.optionList.push({value:""}),console.log(this.optionList)},delOption:function(n){this.optionList.splice(n,1)},saveOption:function(){this.data[this.activeindex].content=this.optionList,this.optionList=[],console.log(this.data)},cancel:function(){},handleSelectAll:function(n){this.$refs.selection.selectAll(n)},handleSubmit:function(n){var t=this;this.$refs[n].validate(function(n){n?(t.data.forEach(function(n,t){n.seq=t+""}),t.formValidate.sopTemplate=(0,i.default)(t.data),console.log(t.formValidate),"add"==t.operationstatus?(0,o.sopAdd)(t.formValidate).then(function(n){t.$Message.success(n.data.data),t.getformatdata({pageSize:10,startPage:1}),t.formValidate={isEnable:0,sopNum:"",sopName:"",siteUuid:""},t.data=[]}):(0,o.sopUpdate)(t.formValidate).then(function(n){t.getformatdata({pageSize:10,startPage:1}),t.formValidate={isEnable:0,sopNum:"",sopName:"",siteUuid:""},t.data=[]}),t.showcom=!0):t.$Message.error("Fail!")})},handleReset:function(n){this.showcom=!0,this.$refs[n].resetFields()},handleAdd:function(){this.sopdata.push({description:"",type:"",typeoption:""})},handleRemove:function(n){this.formValidate.items[n].status=0},addSOP:function(){this.showcom=!1,this.operationstatus="add"},editSOP:function(n,t){var e=this;(0,o.sopId)(n.uuid).then(function(n){console.log(n);var t=n.data.data;e.formValidate={isEnable:t.isEnable,sopNum:t.sopNum,sopName:t.sopName,siteUuid:t.siteUuid,uuid:t.uuid},e.data=t.sopTemplate,console.log(e.data)}),this.showcom=!1,this.operationstatus="edit"},removeSOP:function(){},copySOP:function(){},onSelect:function(n,t){this.selection=n},onChange:function(n){this.getformatdata({pageSize:10,startPage:n})},onChangeSite:function(n){var t=this;"add"==this.operationstatus&&(0,o.sopCode)(n).then(function(n){t.formValidate.sopNum=n.data.data})},getformatdata:function(n){var t=this;(0,o.sopList)(n).then(function(n){t.data1=n.data.data.records,t.total=n.data.data.total,t.data1.forEach(function(n){n.createTime=t.$util.formatTime(n.createTime),n.isEnable=0==n.isEnable?"启用":"禁用"})})},init:function(){var n=this,t=this;this.columns=[{title:"序号",width:80,align:"center",type:"index"},{title:"sop步骤名称",key:"title",render:function(n,e){return n("Input",{props:{type:"text",value:t.data[e.index].title},on:{"on-blur":function(n){t.data[e.index].title=n.target.value}}})}},{title:"sop步骤类型",key:"type",render:function(t,e){return t("Select",{props:{value:n.data[e.index].type},on:{"on-change":function(t){n.data[e.index].type=t}}},[t("Option",{props:{value:"button"}},"是否正常"),t("Option",{props:{value:"select"}},"下拉框"),t("Option",{props:{value:"radio"}},"单选框"),t("Option",{props:{value:"text"}},"输入框"),t("Option",{props:{value:"picture"}},"拍照")])}},{title:"操作",key:"sopDetailAction",align:"center",render:function(t,e){return t("div",[t("Button",{props:{type:"primary",size:"default",disabled:"radio"!=n.data[e.index].type&&"select"!=n.data[e.index].type},style:{marginRight:"5px"},on:{click:function(){n.activeindex=e.index,n.modal=!0,"string"==typeof n.data[e.index].content?n.optionList=JSON.parse(n.data[e.index].content):n.optionList=n.data[e.index].content,console.log(n.optionList)}}},"设置"),t("Button",{props:{type:"error",size:"default"},style:{marginRight:"5px"},on:{click:function(){n.data.splice(e.index,1)}}},"删除"),t("Button",{props:{type:"primary",size:"default"},style:{marginRight:"5px"},on:{click:function(){if(e.index>0){var t=n.data[e.index];n.data.splice(e.index,1),n.data.splice(e.index-1,0,t)}}}},"上移"),t("Button",{props:{type:"primary",size:"default"},on:{click:function(){if(e.index<n.data.length){var t=n.data[e.index];n.data.splice(e.index,1),n.data.splice(e.index+1,0,t)}}}},"下移")])}}]}},computed:{power:function(){return!1}}}},319:function(n,t,e){var a=e(320);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e(17)("04347038",a,!1)},320:function(n,t,e){t=n.exports=e(16)(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},321:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"operation",attrs:{id:"bb"}},[n.showcom?e("div",{staticClass:"wrap"},[e("Row",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"flex",justify:"space-between"}},[e("Col",[e("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"ghost",disabled:n.power},on:{click:n.addSOP}},[n._v("新建")]),n._v(" "),e("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"ghost",disabled:n.power},on:{click:n.removeSOP}},[n._v("\n        删除\n      ")]),n._v(" "),e("Button",{attrs:{type:"ghost",disabled:n.power},on:{click:n.copySOP}},[n._v("\n        复制\n      ")])],1),n._v(" "),e("Col",[e("span",[n._v("开始时间：")]),n._v(" "),e("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:n.startDate,callback:function(t){n.startDate=t},expression:"startDate"}}),n._v(" "),e("span",[n._v("结束时间：")]),n._v(" "),e("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:n.endDate,callback:function(t){n.endDate=t},expression:"endDate"}}),n._v(" "),e("Select",{staticStyle:{width:"100px"},model:{value:n.searchType,callback:function(t){n.searchType=t},expression:"searchType"}},n._l(n.searchTypeList,function(t){return e("Option",{key:t.key,attrs:{value:t.key}},[n._v(n._s(t.title))])})),n._v(" "),"isEnable"!=n.searchType?e("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索的内容"},model:{value:n.searchValue,callback:function(t){n.searchValue=t},expression:"searchValue"}}):n._e(),n._v(" "),"isEnable"==n.searchType?e("Select",{staticStyle:{width:"200px"},model:{value:n.searchIsEnable,callback:function(t){n.searchIsEnable=t},expression:"searchIsEnable"}},[e("Option",{attrs:{value:0}},[n._v("启用")]),n._v(" "),e("Option",{attrs:{value:1}},[n._v("禁用")])],1):n._e(),n._v(" "),e("Button",{attrs:{icon:"ivu-icon ivu-icon-search"},on:{click:n.search}})],1)],1),n._v(" "),e("Table",{ref:"selection",attrs:{border:"",columns:n.columns1,data:n.data1},on:{"on-select":n.onSelect,"on-row-dblclick":n.editSOP}}),n._v(" "),e("div",{staticStyle:{float:"right",margin:"10px"}},[e("Page",{attrs:{total:n.total,"page-size":10},on:{"on-change":n.onChange}})],1)],1):e("div",{staticClass:"wrap"},[e("Form",{ref:"formValidate",attrs:{model:n.formValidate,rules:n.ruleValidate,"label-position":"right","label-width":100}},[e("Row",[e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"站点名称",prop:"siteUuid"}},[e("Select",{on:{"on-change":n.onChangeSite},model:{value:n.formValidate.siteUuid,callback:function(t){n.$set(n.formValidate,"siteUuid",t)},expression:"formValidate.siteUuid"}},n._l(n.siteList,function(t){return e("Option",{key:t.uuid,attrs:{value:t.uuid}},[n._v(n._s(t.siteName))])}))],1)],1)],1),n._v(" "),e("Row",[e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"sop名称",prop:"sopName"}},[e("Input",{model:{value:n.formValidate.sopName,callback:function(t){n.$set(n.formValidate,"sopName",t)},expression:"formValidate.sopName"}})],1)],1),n._v(" "),e("Col",{attrs:{xs:24,lg:12}},[e("FormItem",{attrs:{label:"状态"}},[e("RadioGroup",{model:{value:n.formValidate.isEnable,callback:function(t){n.$set(n.formValidate,"isEnable",t)},expression:"formValidate.isEnable"}},[e("Radio",{attrs:{label:0}},[n._v("启用")]),n._v(" "),e("Radio",{attrs:{label:1}},[n._v("禁用")])],1)],1)],1)],1),n._v(" "),e("div",{staticStyle:{"margin-bottom":"20px"}},[e("Button",{attrs:{type:"ghost"},on:{click:n.add}},[n._v("添加新项")]),n._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"}},[n._v("导入列表")])],1),n._v(" "),e("Table",{attrs:{columns:n.columns,data:n.data,border:!0}}),n._v(" "),e("Modal",{attrs:{title:"Common Modal dialog box title"},on:{"on-ok":n.saveOption,"on-cancel":n.cancel},model:{value:n.modal,callback:function(t){n.modal=t},expression:"modal"}},[e("Button",{attrs:{type:"primary"},on:{click:n.addOption}},[n._v("添加")]),n._v(" "),e("span",[n._v("手机端会取第一条数据作为默认值")]),n._v(" "),n._l(n.optionList,function(t,a){return e("Row",{key:a,staticStyle:{margin:"5px 0"}},[e("Col",{attrs:{span:"20","class-name":"optionStyleBtn"}},[e("Input",{model:{value:t.value,callback:function(e){n.$set(t,"value",e)},expression:"item.value"}})],1),n._v(" "),e("Col",{staticStyle:{"margin-left":"10px"},attrs:{span:"2"}},[e("Button",{on:{click:function(t){n.delOption(a)}}},[n._v("删除")])],1)],1)})],2),n._v(" "),e("FormItem",{staticStyle:{"margin-top":"20px"}},[e("Button",{staticClass:"save ",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",disabled:n.power},on:{click:function(t){n.handleSubmit("formValidate")}}},[n._v("保存")]),n._v(" "),e("Button",{staticClass:"button ",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){n.handleReset("formValidate")}}},[n._v("取消")])],1)],1)],1)])},i=[];a._withStripped=!0;var o={render:a,staticRenderFns:i};t.default=o}});