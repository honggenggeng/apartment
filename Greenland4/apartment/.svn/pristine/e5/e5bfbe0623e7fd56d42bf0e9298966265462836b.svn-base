webpackJsonp([9],{267:function(e,t,a){"use strict";function i(e){u||a(349)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(287),o=a.n(s);for(var r in s)"default"!==r&&function(e){a.d(t,e,function(){return s[e]})}(r);var n=a(351),d=a.n(n),u=!1,l=a(1),p=i,f=l(o.a,d.a,!1,p,"data-v-5235515a",null);f.options.__file="src\\views\\aden\\digiops\\manage\\userManage.vue",t.default=f.exports},268:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftId=t.shiftUpdate=t.shiftList=t.shiftCode=t.shiftAdd=t.auditId=t.auditUpdate=t.auditList=t.auditCode=t.auditAdd=t.lineId=t.lineUpdate=t.lineList=t.lineCode=t.lineAdd=t.pointQrcode=t.pointSpinner=t.pointId=t.pointUpdate=t.pointList=t.pointCode=t.pointAdd=t.sopSpinner=t.sopId=t.sopUpdate=t.sopList=t.sopCode=t.sopAdd=t.userSpinner=t.userid=t.userupdate=t.userIsExist=t.userlist=t.userpassword=t.useradd=t.siteid=t.siteSpinner=t.siteupdate=t.siteIsExist=t.sitelist=t.siteallList=t.siteadd=t.roleupdate=t.roleadd=t.roleId=t.rolelist=t.rolemenuList=t.menu=t.upload=t.login=t.insertRole=void 0;var i=a(11),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.insertRole=function(e){return s.default.ajax.post("/digiops/role/insertRole",e)},t.login=function(e){return s.default.ajax.post("/digiops/digiops/login",e)},t.upload=function(e){return s.default.ajax.post("/digiops/upload/picture",e)},t.menu=function(){return s.default.ajax.get("/digiops/role/queryMenuList")},t.rolemenuList=function(){return s.default.ajax.get("/digiops/role/menuList")},t.rolelist=function(){return s.default.ajax.get("/digiops/role/list")},t.roleId=function(e){return s.default.ajax.get("/digiops/role/"+e)},t.roleadd=function(e){return s.default.ajax.post("/digiops/role/add",e)},t.roleupdate=function(e){return s.default.ajax.post("/digiops/role/update",e)},t.siteadd=function(e){return s.default.ajax.post("/digiops/site/add",e)},t.siteallList=function(e){return s.default.ajax.post("/digiops/site/allList",e)},t.sitelist=function(e){return s.default.ajax.post("/digiops/site/list",e)},t.siteIsExist=function(e){return s.default.ajax.post("/digiops/site/isExist",e)},t.siteupdate=function(e){return s.default.ajax.post("/digiops/site/update",e)},t.siteSpinner=function(e){return s.default.ajax.post("/digiops/site/siteSpinner",e)},t.siteid=function(e){return s.default.ajax.get("/digiops/site/"+e)},t.useradd=function(e){return s.default.ajax.post("/digiops/user/add",e)},t.userpassword=function(e){return s.default.ajax.get("/digiops/user/password",e)},t.userlist=function(e){return s.default.ajax.post("/digiops/user/list",e)},t.userIsExist=function(e){return s.default.ajax.post("/digiops/user/isExist",e)},t.userupdate=function(e){return s.default.ajax.post("/digiops/user/update",e)},t.userid=function(e){return s.default.ajax.get("/digiops/user/"+e)},t.userSpinner=function(){return s.default.ajax.get("/digiops/user/userSpinner")},t.sopAdd=function(e){return s.default.ajax.post("/digiops/sop/add",e)},t.sopCode=function(e){return s.default.ajax.get("/digiops/sop/generatedCode/"+e)},t.sopList=function(e){return s.default.ajax.post("/digiops/sop/list",e)},t.sopUpdate=function(e){return s.default.ajax.post("/digiops/sop/update",e)},t.sopId=function(e){return s.default.ajax.get("/digiops/sop/"+e)},t.sopSpinner=function(e){return s.default.ajax.get("/digiops/sop/sopSpinner/"+e)},t.pointAdd=function(e){return s.default.ajax.post("/digiops/point/add",e)},t.pointCode=function(e){return s.default.ajax.get("/digiops/point/generatedCode/"+e)},t.pointList=function(e){return s.default.ajax.post("/digiops/point/list",e)},t.pointUpdate=function(e){return s.default.ajax.post("/digiops/point/update",e)},t.pointId=function(e){return s.default.ajax.get("/digiops/point/"+e)},t.pointSpinner=function(e){return s.default.ajax.get("/digiops/point/pointSpinner/"+e)},t.pointQrcode=function(e){return s.default.ajax.post("/digiops/upload/qrcode",e)},t.lineAdd=function(e){return s.default.ajax.post("/digiops/line/add",e)},t.lineCode=function(e){return s.default.ajax.get("/digiops/line/generatedCode/"+e)},t.lineList=function(e){return s.default.ajax.post("/digiops/line/list",e)},t.lineUpdate=function(e){return s.default.ajax.post("/digiops/line/update",e)},t.lineId=function(e){return s.default.ajax.get("/digiops/line/"+e)},t.auditAdd=function(e){return s.default.ajax.post("/digiops/audit/add",e)},t.auditCode=function(e){return s.default.ajax.get("/digiops/audit/generatedCode/"+e)},t.auditList=function(e){return s.default.ajax.post("/digiops/audit/list",e)},t.auditUpdate=function(e){return s.default.ajax.post("/digiops/audit/update",e)},t.auditId=function(e){return s.default.ajax.get("/digiops/audit/"+e)},t.shiftAdd=function(e){return s.default.ajax.post("/digiops/shift/add",e)},t.shiftCode=function(e){return s.default.ajax.get("/digiops/shift/generatedCode/"+e)},t.shiftList=function(e){return s.default.ajax.post("/digiops/shift/list",e)},t.shiftUpdate=function(e){return s.default.ajax.post("/digiops/shift/update",e)},t.shiftId=function(e){return s.default.ajax.get("/digiops/shift/"+e)}},287:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(31),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(268);t.default={data:function(){return{searchIsEnable:2,startDate:"",endDate:"",isshow:!0,total:0,parentList:[],operationstatus:"add",searchValue:"",searchType:"userNum",searchTypeList:[{title:"用户编码",key:"userNum"},{title:"用户名称",key:"userName"},{title:"角色",key:"roleName"},{title:"站点",key:"siteName"},{title:"状态",key:"isEnable"}],siteList:[],roleList:[],value4:"",formValidate:{userNum:"",userName:"",roleUuid:"",siteUuids:[],isEnable:0,parentUuid:"",email:"",telephone:""},ruleValidate:{userNum:[{required:!0,message:"用户ID为必填项",trigger:"change"}],userName:[{required:!0,message:"用户名为必填项",trigger:"change"}],roleUuid:[{required:!0,message:"角色为必填项",trigger:"change"}],email:[{required:!1,message:"角色为必填项",trigger:"change"}],telephone:[{required:!1,message:"站点为必填项",trigger:"change"}],passWord:[{required:!1,message:"站点为必填项",trigger:"change"}]},columns4:[{type:"selection",width:60,align:"center"},{title:"用户ID",key:"userNum"},{title:"用户名称",key:"userName"},{title:"角色",key:"roleName"},{title:"站点",key:"siteNames"},{title:"登录时间",key:"lastLoginDate"},{title:"状态",key:"isEnable"}],data1:[]}},created:function(){var e=this;this.getformatdata({pageSize:10,startPage:1}),(0,o.rolelist)({pageNum:1}).then(function(t){e.roleList=t.data.data}),(0,o.siteSpinner)().then(function(t){e.siteList=t.data.data}),(0,o.userSpinner)().then(function(t){e.parentList=t.data.data})},methods:{search:function(){var e={pageSize:10,startPage:1,startDate:this.startDate,endDate:this.endDate};"isEnable"==this.searchType?e.isEnable=this.searchIsEnable:e[this.searchType]=this.searchValue,""!=this.endDate&&""!=this.startDate?this.endDate>=this.startDate?this.getformatdata(e):(this.$Message.info("结束时间应大于开始时间"),this.endDate=""):this.getformatdata(e)},changePage:function(e){this.getformatdata({pageSize:10,startPage:e})},isExist:function(){var e=this;(0,o.userIsExist)({userNum:this.formValidate.userNum}).then(function(t){t.data.data||(e.$Message.info("用户名重复"),e.formValidate.userNum="")})},adduser:function(){this.isshow=!1,this.operationstatus="add"},edituser:function(e,t){var a=this;(0,o.userid)(e.uuid).then(function(e){var t=e.data.data.siteRecords.map(function(e){return e.uuid});console.log(t),a.formValidate={isEnable:e.data.data.isEnable,userNum:e.data.data.userNum,userName:e.data.data.userName,email:e.data.data.email,telephone:e.data.data.telephone,roleUuid:e.data.data.role.uuid,siteUuids:t,parentUuid:e.data.data.parentUuid,uuid:e.data.data.uuid}}),this.isshow=!1,this.operationstatus="edit",console.log(this.formValidate.roleUuid)},handleSelectAll:function(e){this.$refs.selection.selectAll(e)},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.$Message.success("Success!"),t.formValidate.siteUuids=(0,s.default)(t.formValidate.siteUuids).replace("[","").replace("]","").replace(/"/g,""),console.log(t.formValidate.siteUuids),"add"==t.operationstatus?(0,o.useradd)(t.formValidate).then(function(e){t.getformatdata({pageSize:10,startPage:1})}):"edit"==t.operationstatus&&(0,o.userupdate)(t.formValidate).then(function(e){t.getformatdata({pageSize:10,startPage:1})}),t.formValidate={userNum:"",userName:"",roleUuid:"",siteUuids:[],isEnable:0,parentUuid:"",email:"",telephone:""},t.isshow=!0,console.log(t.formValidate)):t.$Message.error("Fail!")})},handleReset:function(e){this.formValidate={userNum:"",userName:"",roleUuid:"",siteUuids:[],isEnable:0,parentUuid:"",email:"",telephone:""},this.isshow=!0},getformatdata:function(e){var t=this;(0,o.userlist)(e).then(function(e){t.data1=e.data.data.records,t.total=e.data.data.total,console.log(e.data),t.data1.forEach(function(e,a){e.lastLoginDate=t.$util.formatTime(e.lastLoginDate),console.log(e.lastLoginDate),e.isEnable=0==e.isEnable?"启用":"禁用"})})},handleSuccess:function(){}}}},349:function(e,t,a){var i=a(350);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(17)("8c58fabc",i,!1)},350:function(e,t,a){t=e.exports=a(16)(!1),t.push([e.i,"\n.operation_mode[data-v-5235515a] {\r\n  padding: 0px 0px 10px;\n}\n.page[data-v-5235515a] {\r\n  float: right;\r\n  margin: 10px;\n}\r\n",""])},351:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation",attrs:{id:"bb"}},[e.isshow?a("div",{staticClass:"wrap"},[a("Row",{attrs:{"class-name":"operation_mode",type:"flex",justify:"space-between"}},[a("Col",[a("Button",{attrs:{type:"ghost"},on:{click:e.adduser}},[e._v("新建")])],1),e._v(" "),a("Col",[a("span",[e._v("开始时间：")]),e._v(" "),a("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),a("span",[e._v("结束时间：")]),e._v(" "),a("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),e._v(" "),a("Select",{staticStyle:{width:"100px"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.searchTypeList,function(t){return a("Option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.title))])})),e._v(" "),"isEnable"!=e.searchType?a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索的内容"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}):e._e(),e._v(" "),"isEnable"==e.searchType?a("Select",{staticStyle:{width:"200px"},model:{value:e.searchIsEnable,callback:function(t){e.searchIsEnable=t},expression:"searchIsEnable"}},[a("Option",{attrs:{value:0}},[e._v("启用")]),e._v(" "),a("Option",{attrs:{value:1}},[e._v("禁用")])],1):e._e(),e._v(" "),a("Button",{attrs:{icon:"ivu-icon ivu-icon-search"},on:{click:e.search}})],1)],1),e._v(" "),a("Table",{ref:"selection",attrs:{border:"",columns:e.columns4,data:e.data1},on:{"on-row-dblclick":e.edituser}}),e._v(" "),a("div",{staticClass:"page"},[a("Page",{attrs:{total:e.total,"page-size":5},on:{"on-change":e.changePage}})],1)],1):a("div",{staticClass:"wrap"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-position":"right","label-width":100}},[a("Row",[a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"用户ID",prop:"userNum"}},[a("Input",{attrs:{disabled:"add"!=e.operationstatus},on:{"on-blur":e.isExist},model:{value:e.formValidate.userNum,callback:function(t){e.$set(e.formValidate,"userNum",t)},expression:"formValidate.userNum"}})],1)],1),e._v(" "),a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"用户姓名",prop:"userName"}},[a("Input",{model:{value:e.formValidate.userName,callback:function(t){e.$set(e.formValidate,"userName",t)},expression:"formValidate.userName"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{model:{value:e.formValidate.email,callback:function(t){e.$set(e.formValidate,"email",t)},expression:"formValidate.email"}})],1)],1),e._v(" "),a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"联系方式",prop:"telephone"}},[a("Input",{model:{value:e.formValidate.telephone,callback:function(t){e.$set(e.formValidate,"telephone",t)},expression:"formValidate.telephone"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"密码",prop:"passWord"}},[a("Input",{attrs:{placeholder:"不填就是不修改密码",type:"password"},model:{value:e.formValidate.passWord,callback:function(t){e.$set(e.formValidate,"passWord",t)},expression:"formValidate.passWord"}})],1)],1),e._v(" "),a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"角色",prop:"roleUuid"}},[a("Select",{model:{value:e.formValidate.roleUuid,callback:function(t){e.$set(e.formValidate,"roleUuid",t)},expression:"formValidate.roleUuid"}},e._l(e.roleList,function(t,i){return a("Option",{key:i,attrs:{value:t.uuid}},[e._v(e._s(t.roleName))])}))],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"站点"}},[a("Select",{attrs:{multiple:""},model:{value:e.formValidate.siteUuids,callback:function(t){e.$set(e.formValidate,"siteUuids",t)},expression:"formValidate.siteUuids"}},e._l(e.siteList,function(t,i){return a("Option",{key:i,attrs:{value:t.uuid}},[e._v(e._s(t.siteName))])}))],1)],1),e._v(" "),a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"管理人员",prop:"parentUuid"}},[a("Select",{model:{value:e.formValidate.parentUuid,callback:function(t){e.$set(e.formValidate,"parentUuid",t)},expression:"formValidate.parentUuid"}},e._l(e.parentList,function(t,i){return a("Option",{key:i,attrs:{value:t.uuid}},[e._v(e._s(t.userName))])}))],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",{attrs:{label:"状态",prop:"isEnable"}},[a("RadioGroup",{model:{value:e.formValidate.isEnable,callback:function(t){e.$set(e.formValidate,"isEnable",t)},expression:"formValidate.isEnable"}},[a("Radio",{attrs:{label:0}},[e._v("启用")]),e._v(" "),a("Radio",{attrs:{label:1}},[e._v("禁用")])],1)],1)],1)],1),e._v(" "),a("Col",{attrs:{xs:24,lg:12}},[a("FormItem",[a("Button",{staticClass:"save ",staticStyle:{"margin-left":"0px"},attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("取消")])],1)],1)],1)],1)])},s=[];i._withStripped=!0;var o={render:i,staticRenderFns:s};t.default=o}});