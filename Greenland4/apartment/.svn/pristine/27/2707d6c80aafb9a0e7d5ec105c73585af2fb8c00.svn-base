webpackJsonp([11],{266:function(t,e,n){"use strict";function a(t){d||n(346)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(286),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);var l=n(348),r=n.n(l),d=!1,u=n(1),p=a,f=u(o.a,r.a,!1,p,"data-v-ce636776",null);f.options.__file="src\\views\\aden\\digiops\\manage\\roleManage.vue",e.default=f.exports},268:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shiftId=e.shiftUpdate=e.shiftList=e.shiftCode=e.shiftAdd=e.auditId=e.auditUpdate=e.auditList=e.auditCode=e.auditAdd=e.lineId=e.lineUpdate=e.lineList=e.lineCode=e.lineAdd=e.pointQrcode=e.pointSpinner=e.pointId=e.pointUpdate=e.pointList=e.pointCode=e.pointAdd=e.sopSpinner=e.sopId=e.sopUpdate=e.sopList=e.sopCode=e.sopAdd=e.userSpinner=e.userid=e.userupdate=e.userIsExist=e.userlist=e.userpassword=e.useradd=e.siteid=e.siteSpinner=e.siteupdate=e.siteIsExist=e.sitelist=e.siteallList=e.siteadd=e.roleupdate=e.roleadd=e.roleId=e.rolelist=e.rolemenuList=e.menu=e.upload=e.login=e.insertRole=void 0;var a=n(11),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.insertRole=function(t){return i.default.ajax.post("/digiops/role/insertRole",t)},e.login=function(t){return i.default.ajax.post("/digiops/digiops/login",t)},e.upload=function(t){return i.default.ajax.post("/digiops/upload/picture",t)},e.menu=function(){return i.default.ajax.get("/digiops/role/queryMenuList")},e.rolemenuList=function(){return i.default.ajax.get("/digiops/role/menuList")},e.rolelist=function(){return i.default.ajax.get("/digiops/role/list")},e.roleId=function(t){return i.default.ajax.get("/digiops/role/"+t)},e.roleadd=function(t){return i.default.ajax.post("/digiops/role/add",t)},e.roleupdate=function(t){return i.default.ajax.post("/digiops/role/update",t)},e.siteadd=function(t){return i.default.ajax.post("/digiops/site/add",t)},e.siteallList=function(t){return i.default.ajax.post("/digiops/site/allList",t)},e.sitelist=function(t){return i.default.ajax.post("/digiops/site/list",t)},e.siteIsExist=function(t){return i.default.ajax.post("/digiops/site/isExist",t)},e.siteupdate=function(t){return i.default.ajax.post("/digiops/site/update",t)},e.siteSpinner=function(t){return i.default.ajax.post("/digiops/site/siteSpinner",t)},e.siteid=function(t){return i.default.ajax.get("/digiops/site/"+t)},e.useradd=function(t){return i.default.ajax.post("/digiops/user/add",t)},e.userpassword=function(t){return i.default.ajax.get("/digiops/user/password",t)},e.userlist=function(t){return i.default.ajax.post("/digiops/user/list",t)},e.userIsExist=function(t){return i.default.ajax.post("/digiops/user/isExist",t)},e.userupdate=function(t){return i.default.ajax.post("/digiops/user/update",t)},e.userid=function(t){return i.default.ajax.get("/digiops/user/"+t)},e.userSpinner=function(){return i.default.ajax.get("/digiops/user/userSpinner")},e.sopAdd=function(t){return i.default.ajax.post("/digiops/sop/add",t)},e.sopCode=function(t){return i.default.ajax.get("/digiops/sop/generatedCode/"+t)},e.sopList=function(t){return i.default.ajax.post("/digiops/sop/list",t)},e.sopUpdate=function(t){return i.default.ajax.post("/digiops/sop/update",t)},e.sopId=function(t){return i.default.ajax.get("/digiops/sop/"+t)},e.sopSpinner=function(t){return i.default.ajax.get("/digiops/sop/sopSpinner/"+t)},e.pointAdd=function(t){return i.default.ajax.post("/digiops/point/add",t)},e.pointCode=function(t){return i.default.ajax.get("/digiops/point/generatedCode/"+t)},e.pointList=function(t){return i.default.ajax.post("/digiops/point/list",t)},e.pointUpdate=function(t){return i.default.ajax.post("/digiops/point/update",t)},e.pointId=function(t){return i.default.ajax.get("/digiops/point/"+t)},e.pointSpinner=function(t){return i.default.ajax.get("/digiops/point/pointSpinner/"+t)},e.pointQrcode=function(t){return i.default.ajax.post("/digiops/upload/qrcode",t)},e.lineAdd=function(t){return i.default.ajax.post("/digiops/line/add",t)},e.lineCode=function(t){return i.default.ajax.get("/digiops/line/generatedCode/"+t)},e.lineList=function(t){return i.default.ajax.post("/digiops/line/list",t)},e.lineUpdate=function(t){return i.default.ajax.post("/digiops/line/update",t)},e.lineId=function(t){return i.default.ajax.get("/digiops/line/"+t)},e.auditAdd=function(t){return i.default.ajax.post("/digiops/audit/add",t)},e.auditCode=function(t){return i.default.ajax.get("/digiops/audit/generatedCode/"+t)},e.auditList=function(t){return i.default.ajax.post("/digiops/audit/list",t)},e.auditUpdate=function(t){return i.default.ajax.post("/digiops/audit/update",t)},e.auditId=function(t){return i.default.ajax.get("/digiops/audit/"+t)},e.shiftAdd=function(t){return i.default.ajax.post("/digiops/shift/add",t)},e.shiftCode=function(t){return i.default.ajax.get("/digiops/shift/generatedCode/"+t)},e.shiftList=function(t){return i.default.ajax.post("/digiops/shift/list",t)},e.shiftUpdate=function(t){return i.default.ajax.post("/digiops/shift/update",t)},e.shiftId=function(t){return i.default.ajax.get("/digiops/shift/"+t)}},286:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),o=a(i),s=n(100),l=a(s),r=n(268);e.default={data:function(){return{isshow:!0,serviceTypeList:[{label:"保安",value:1},{label:"保洁",value:2},{label:"配餐",value:3}],formdata:{},operationstatus:"add",menulistPC:[],menulistAPP:[],formValidate:{roleName:"",roleDetail:"",isApp:!0,isEnable:0,serviceType:1},formValidateTest:{},ruleValidate:{roleName:[{required:!0,message:"用户ID为必填项",trigger:"blur"}],roleDetail:[{required:!0,message:"描述为必填项",trigger:"blur"}]},columns4:[{type:"selection",width:60,align:"center"},{title:"角色名称",key:"roleName"},{title:"服务类型",key:"serviceType"},{title:"描述",key:"roleDetail"},{title:"状态",key:"isEnable"}],data1:[]}},created:function(){var t=this;this.getdata(),(0,r.rolemenuList)().then(function(e){console.log(e.data),e.data.data.forEach(function(e){1==e.isApp?t.menulistPC.push(e):t.menulistAPP.push(e)}),e.data.data.forEach(function(e){t.formValidateTest[e.uuid]=3}),t.formValidate=(0,l.default)({},t.formValidate,t.formValidateTest),console.log(t.menulistPC),console.log(t.formValidate)})},methods:{editrole:function(t,e){var n=this;this.isshow=!1,console.log(t.uuid),(0,r.roleId)(t.uuid).then(function(t){console.log(t.data);var e=t.data.data;n.menulistPC=e.menuRoleDTOs.slice(0,e.menuRoleDTOs.length-5),n.menulistAPP=e.menuRoleDTOs.slice(e.menuRoleDTOs.length-5),n.menulistPC.forEach(function(t,e){n.formValidate[t.uuid]=t.powerType}),n.menulistAPP.forEach(function(t,e){n.formValidate[t.uuid]=t.powerType}),n.formValidate.roleName=e.roleName,n.formValidate.roleDetail=e.roleDetail,n.formValidate.serviceType=e.serviceType,n.formValidate.isEnable=e.isEnable,n.formValidate.uuid=e.uuid,n.formValidate.isApp=0==e.isApp,console.log(n.formValidate)}),this.operationstatus="edit"},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.$Message.success("Success!");e.isshow=!0,console.log(e.formValidate);for(var n in e.formValidate)32!=n.length&&(console.log(n),e.formdata[n]=e.formValidate[n],delete e.formValidate[n]);console.log(e.formValidate),console.log(e.formdata),e.formdata.roleMenuList=(0,o.default)(e.formValidate).replace("{","").replace(/:/g,"@").replace("}","").replace(/"/g,""),e.formdata.isApp=1==e.formdata.isApp?0:1,console.log(e.formdata),"add"==e.operationstatus?(console.log(e.formdata),(0,r.roleadd)(e.formdata).then(function(t){e.getdata()}).catch(function(t){console.log(t)})):"edit"==e.operationstatus&&(0,r.roleupdate)(e.formdata).then(function(t){e.getdata()})}else e.$Message.error("Fail!")}),this.formValidate.roleName="",this.formValidate.roleDetail="",this.formValidate.isEnable=0},handleReset:function(t){this.isshow=!0,this.formValidate.roleName="",this.formValidate.roleDetail="",this.formValidate.isEnable=0},handleSuccess:function(t,e){console.log(t)},addnew:function(){this.isshow=!1,this.operationstatus="add"},getdata:function(){var t=this;(0,r.rolelist)().then(function(e){t.data1=e.data.data,t.data1.forEach(function(t){t.isEnable=0==t.isEnable?"启用":"禁用",t.serviceType=1==t.serviceType?"保安":2==t.serviceType?"保洁":"配餐"})})}}}},346:function(t,e,n){var a=n(347);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(17)("4fcb8a22",a,!1)},347:function(t,e,n){e=t.exports=n(16)(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},348:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"operation",attrs:{id:"bb"}},[t.isshow?n("div",{staticClass:"wrap"},[n("Row",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"flex",justify:"space-between"}},[n("Col",[n("Button",{attrs:{type:"ghost"},on:{click:t.addnew}},[t._v("新建")])],1),t._v(" "),n("Col",[n("Input",{attrs:{icon:"search",placeholder:"请输入搜索的内容"}})],1)],1),t._v(" "),n("Table",{attrs:{border:"",columns:t.columns4,data:t.data1},on:{"on-row-dblclick":t.editrole}})],1):n("Form",{ref:"formValidate",staticClass:"wrap",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-position":"right","label-width":100}},[n("Row",[n("Col",{attrs:{xs:24,lg:12}},[n("FormItem",{attrs:{label:"角色名称",prop:"roleName"}},[n("Input",{model:{value:t.formValidate.roleName,callback:function(e){t.$set(t.formValidate,"roleName",e)},expression:"formValidate.roleName"}})],1)],1),t._v(" "),n("Col",{attrs:{xs:24,lg:12}},[n("FormItem",{attrs:{label:"描述",prop:"roleDetail"}},[n("Input",{model:{value:t.formValidate.roleDetail,callback:function(e){t.$set(t.formValidate,"roleDetail",e)},expression:"formValidate.roleDetail"}})],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{xs:24,lg:12}},[n("FormItem",{attrs:{label:"服务类型",prop:"serviceType"}},[n("Select",{model:{value:t.formValidate.serviceType,callback:function(e){t.$set(t.formValidate,"serviceType",e)},expression:"formValidate.serviceType"}},t._l(t.serviceTypeList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),n("Col",{staticStyle:{"padding-left":"40px"},attrs:{xs:24,lg:12}},[n("Upload",{attrs:{name:"logo","on-success":t.handleSuccess,action:"/upload/picture"}},[n("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("上传角色头像")])],1)],1)],1),t._v(" "),n("Row",[n("FormItem",{attrs:{label:"状态",prop:"isEnable"}},[n("RadioGroup",{model:{value:t.formValidate.isEnable,callback:function(e){t.$set(t.formValidate,"isEnable",e)},expression:"formValidate.isEnable"}},[n("Radio",{attrs:{label:0}},[t._v("启用")]),t._v(" "),n("Radio",{attrs:{label:1}},[t._v("禁用")])],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{xs:24,lg:12}},t._l(t.menulistPC,function(e,a){return n("FormItem",{key:a,attrs:{label:e.menuName}},[n("RadioGroup",{model:{value:t.formValidate[e.uuid],callback:function(n){t.$set(t.formValidate,e.uuid,n)},expression:"formValidate[item.uuid]"}},[n("Radio",{attrs:{label:1}},[t._v("禁用")]),t._v(" "),n("Radio",{attrs:{label:2}},[t._v("查看")]),t._v(" "),n("Radio",{attrs:{label:3}},[t._v("编辑")])],1)],1)})),t._v(" "),n("Col",{attrs:{xs:24,lg:12}},[n("Checkbox",{model:{value:t.formValidate.isApp,callback:function(e){t.$set(t.formValidate,"isApp",e)},expression:"formValidate.isApp"}},[t._v("APP权限")]),t._v(" "),t._l(t.menulistAPP,function(e,a){return t.formValidate.isApp?n("FormItem",{key:a,attrs:{label:e.menuName}},[n("RadioGroup",{attrs:{size:"large"},model:{value:t.formValidate[e.uuid],callback:function(n){t.$set(t.formValidate,e.uuid,n)},expression:"formValidate[item.uuid]"}},[n("Radio",{attrs:{label:1}},[t._v("禁用")]),t._v(" "),n("Radio",{attrs:{label:3}},[t._v("启用")])],1)],1):t._e()})],2)],1),t._v(" "),n("Col",{attrs:{xs:24,lg:12}},[n("FormItem",[n("Button",{staticClass:"save ",staticStyle:{"margin-left":"0px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),t._v(" "),n("Button",{staticClass:"button ",staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1)],1)},i=[];a._withStripped=!0;var o={render:a,staticRenderFns:i};e.default=o}});